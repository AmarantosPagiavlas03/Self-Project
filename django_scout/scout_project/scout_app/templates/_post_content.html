{% load custom_filters %}
<div class="feed_container__profile">
    <div class="feed_container__profile_icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2M7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.5.88 4.93 1.78A7.9 7.9 0 0 1 12 20c-1.86 0-3.57-.64-4.93-1.72m11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33A7.93 7.93 0 0 1 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.5-1.64 4.83M12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6m0 5a1.5 1.5 0 0 1-1.5-1.5A1.5 1.5 0 0 1 12 8a1.5 1.5 0 0 1 1.5 1.5A1.5 1.5 0 0 1 12 11"/></svg>
    </div>
    <div class="feed_container__profile_name">
        <p>{{ post.author.username }}  â€¢ </p>
    </div>
    <div class="feed_container__profile_date_posted">
        {{ post.timestamp|custom_timesince }}
    </div>
</div>
<div class="feed_container__image">
    {% if post.photo %}
    <a href="{% url 'scout_app:view_post' post.id %}">
        <img src="{{ post.photo.url }}" alt="Post Image">
    </a>
    {% endif %}
</div>
<div class="feed_container__interactions">
    <div class="feed_container__interactions_like" data-post-id="{{ post.id }}" data-post-url="{% url 'scout_app:like_post' post.id %}" data-liked="{% if user in post.likes.all %}true{% else %}false{% endif %}">
        {% if user in post.likes.all %}
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="currentColor"/>
        </svg>
        {% else %}
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="none" stroke="currentColor" stroke-width="2"/>
        </svg>
        {% endif %}
    </div>
    <div class="feed_container__interactions_comment">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g class="chatbubble-outline"><path fill="currentColor" fill-rule="evenodd" d="M3.463 15.642a.4.4 0 0 0-.039-.24a18 18 0 0 1-.642-1.561c-.18-.517-.38-1.2-.407-1.862c-.2-5.056 4.019-9.076 9.09-9.277s9.595 3.471 9.796 8.527s-4.019 9.076-9.09 9.277a10 10 0 0 1-2.854-.296l-2.769 1.138c-1.992.818-4.087-.925-3.645-3.033zm1.958.411a2.4 2.4 0 0 0-.181-1.49c-.39-.844-.838-1.95-.866-2.663c-.152-3.813 3.058-7.036 7.17-7.2c4.111-.163 7.567 2.796 7.718 6.609c.152 3.813-3.058 7.036-7.17 7.2a8 8 0 0 1-2.558-.313a.97.97 0 0 0-.643.027l-3.103 1.275a.683.683 0 0 1-.928-.772l.56-2.673Z" class="Ellipse 27 (Stroke)" clip-rule="evenodd"/></g></svg>
    </div>
    <div class="feed_container__interactions_share">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M22 18.5a3.5 3.5 0 1 1-7 0a3.5 3.5 0 0 1 7 0M18.5 20a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3M9 11.5a3.5 3.5 0 1 1-7 0a3.5 3.5 0 0 1 7 0M5.5 13a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3M22 5.5a3.5 3.5 0 1 0-7 0a3.5 3.5 0 0 0 7 0M18.5 4a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3" clip-rule="evenodd"/><path fill="currentColor" fill-rule="evenodd" d="M9 11.5a3.5 3.5 0 1 0-7 0a3.5 3.5 0 0 0 7 0M5.5 10a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3" clip-rule="evenodd"/><path fill="currentColor" fill-rule="evenodd" d="M16.617 18.065a1 1 0 0 0-.388-1.36l-8.243-4.58a1 1 0 0 0-.972 1.75l8.244 4.579a1 1 0 0 0 1.36-.389Zm.115-12.168a1 1 0 0 1-.508 1.32l-8.318 3.697a1 1 0 0 1-.812-1.828l8.318-3.697a1 1 0 0 1 1.32.508" clip-rule="evenodd"/></svg>
        <span class="copied-message" style="display: none;">Link Copied!</span>
    </div>
</div>
<div class="feed_container__likestotal">
    <p>{{ post.likes_count }} likes</p>
</div>
<div class="feed_container__description">
    <p class="excerpt3"><b>{{ post.author.username }}:</b> {{ post.description }}</p>
</div>
<div class="feed_container__comments">
    <div class="feed_container__comments_list" style="display: none;">
        {% for comment in post.comments.all %}
        <div class="feed_container__comments_list_comment" data-comment-id="{{ comment.id }}">
            <p><b>{{ comment.author.username }}:</b> {{ comment.content }}</p>
            {% if user == comment.author and comment.timestamp|is_recent_comment %}
            <button class="delete-comment-btn" data-comment-id="{{ comment.id }}" data-delete-url="{% url 'scout_app:delete_comment' comment.id %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41z"/>
                </svg>
            </button>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% if post.comment_count > 0 %}
    <button class="expand-comments-btn">View all {{ post.comment_count }} comments</button>
    {% endif %}
    <div class="add-comment-section add-comment-form" data-post-id="{{ post.id }}" data-post-url="{% url 'scout_app:add_comment' post.id %}">
        <form method="post" action="{% url 'scout_app:add_comment' post.id %}" class="comment-form">
            {% csrf_token %}
            <div class="comment-input-wrapper">
                <textarea name="content" placeholder="Add a comment..." class="comment-input" maxlength="500" required></textarea>
                <button type="submit" class="comment-submit-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M2.01 21L23 12L2.01 3L2 10l15 2l-15 2z"/>
                    </svg>
                </button>
            </div>
        </form>
    </div>
</div>